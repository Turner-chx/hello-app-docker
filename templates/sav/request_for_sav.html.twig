{% extends 'base.html.twig' %}
{% form_theme form 'bootstrap_4_layout.html.twig' %}

{% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('css/iframe.css') }}">
{% endblock %}


{% block body %}
    <div class="container" style="margin-top: -50px;">
        {{ form_start(form) }}
        <div class="text-left">
            <p><span style="color: #a94442; font-weight: bold;">*</span> {{ 'app.entity.Sav.message.required_field'|trans() }}</p>
        </div>
        <h2 class="bg-title">{{ 'app.entity.Sav.form.info'|trans() }}</h2>
        <div class="row">
            {% if display_imei %}
                <div class="col-sm-6">
            {% else %}
                <div class="col-sm-6 d-none">
            {% endif %}
                    {{ form_row(form.imeiNumber) }}
                </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                {{ form_row(form.savType) }}
                {{ form_row(form.serialNumber) }}
                <div class="d-none" id="find_serial_number"></div>
            </div>
            <div class="col-sm-6">
                {{ form_row(form.clientType) }}
                <div id="dealer_reference">
                    {{ form_row(form.dealerReference) }}
                </div>
                {{ form_row(form.store) }}
            </div>
        </div>
        <h2 class="bg-title">{{ 'app.entity.Sav.form.additional_info'|trans() }}</h2>
        <div class="row">
            <div class="col-sm-6">{{ form_row(form.purchaseDate) }}</div>
            <div class="col-sm-6">{{ form_row(form.attachment) }}</div>
        </div>
        <h2 class="bg-title">{{ 'app.entity.Sav.form.description'|trans() }}</h2>
        <div class="row">
            <div class="col-sm-12">{{ form_row(form.natures, {'attr': {'class': 'check-natures'}}) }}</div>
            <div class="col-sm-12">{{ form_row(form.description) }}</div>
        </div>
        <h2 class="bg-title">{{ 'app.entity.Sav.form.customer_info'|trans() }}</h2>
        <div class="row">
            <div class="col-sm-6">
                {{ form_row(form.customerInfos.name, { 'label' : 'app.entity.Sav.form.your_last_first_name'|trans()}) }}
                {{ form_row(form.customerInfos.address) }}
                {{ form_row(form.customerInfos.postalCode) }}
                {{ form_row(form.customerInfos.country) }}
                {{ form_row(form.availability) }}
            </div>
            <div class="col-sm-6">
                {{ form_row(form.customerInfos.email) }}
                {{ form_row(form.customerInfos.additionalAddress) }}
                {{ form_row(form.customerInfos.city) }}
                {{ form_row(form.customerInfos.phoneNumber) }}
                <div class="d-none">
                    {{ form_row(form.customerInfos.customerContact) }}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 text-center">{{ form_row(form.submit) }}</div>
        </div>
        {{ form_end(form) }}
    </div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        {% include 'iframe.js.twig' with {'display_imei': display_imei ? 'true' : 'false'} %}
        window.addEventListener('message', function (event) {
            if (event.data === "FrameHeight") {

                let body = document.body, html = document.documentElement;
                let height = Math.max(body.scrollHeight, body.offsetHeight,
                html.clientHeight, html.scrollHeight, html.offsetHeight);
                height += 150;

                event.source.postMessage({ "FrameHeight": height }, "*");
            }
        });
    </script>
{% endblock %}